<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Blog · Coursier</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Pure Scala Artifact Fetching"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Blog · Coursier"/><meta property="og:type" content="website"/><meta property="og:url" content="https://get-coursier.io/"/><meta property="og:description" content="Pure Scala Artifact Fetching"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/undefined"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://get-coursier.io/blog/atom.xml" title="Coursier Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://get-coursier.io/blog/feed.xml" title="Coursier Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="blog"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Coursier</h2></a><a href="/versions"><h3>2.1.10</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/overview" target="_self">Docs</a></li><li class="siteNavGroupActive siteNavItemActive"><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/coursier/coursier" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/blog/2019/07/12/2.0.0-RC2">2.0.0-RC2</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/07/12/2.0.0-RC1">2.0.0-RC1</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/07/05/1.1.0-M14">1.1.0-M14</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/03/05/1.1.0-M13">1.1.0-M13</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/03/04/1.1.0-M12">1.1.0-M12</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="posts"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/07/12/2.0.0-RC2">2.0.0-RC2</a></h1><p class="post-meta">July 12, 2019</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/alexarchambault" target="_blank" rel="noreferrer noopener">Alexandre Archambault</a></p></div></header><article class="post-content"><div><span><p>coursier <code>2.0.0-RC2</code> was released some time ago. This release brings much
less changes than <code>2.0.0-RC1</code>. It mostly add scala <code>2.13.0</code> support, and
a few fixes in the experimental <code>install</code> command.</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/07/12/2.0.0-RC1">2.0.0-RC1</a></h1><p class="post-meta">July 12, 2019</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/alexarchambault" target="_blank" rel="noreferrer noopener">Alexandre Archambault</a></p></div></header><article class="post-content"><div><span><p>This post describes the most notables changes of coursier <code>2.0.0-RC1</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="strict-conflict-manager"></a><a href="#strict-conflict-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Strict conflict manager</h2>
<p>The CLI now accepts options to enable and configure the new strict
conflict manager.</p>
<ul>
<li><code>--strict</code> enables the strict conflict manager,</li>
<li><code>--strict-exclude org:name</code> excludes some modules from being inspected by the strict conflict manager,</li>
<li><code>--strict-include org:name</code> includes some modules (even if they were excluded by <code>--strict-exclude</code>).</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="install-command"></a><a href="#install-command" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>install</code> command</h2>
<p>The CLI of coursier now has an <code>install</code> command. This command was demo-ed
during the Scala Days talk <a href="https://www.youtube.com/watch?v=b06iQB_It8o">&quot;All the fancy things you can do with flexible dependency management&quot;</a>.</p>
<p>The environment variable <code>COURSIER_EXPERIMENTAL</code> needs to be <code>true</code> for this
command to be enabled. It then allows things like</p>
<pre><code class="hljs css language-bash">$ coursier install scalac sbt-launcher
</code></pre>
<p>It installs launchers for these applications in an OS-specific directory
(<code>~/Library/Application Support/Coursier/bin</code> on OS X,
<code>~/.local/share/coursier/bin</code> on Linux), and will warn you if that directory
isn't in your <code>PATH</code>.</p>
<p>It also allows to install GraalVM applications if <code>GRAALVM_HOME</code> is set
(<code>coursier install coursier-graalvm</code>), and scala-native ones too if
<a href="https://www.scala-native.org/en/v0.3.9-docs/user/setup.html#installing-clang-and-runtime-dependencies">LLVM is installed</a>
(<code>coursier install echo-native</code>).</p>
<p>It should be described in more detail in a later post and / or dedicated
page in the coursier website.</p>
<h2><a class="anchor" aria-hidden="true" id="publish-command"></a><a href="#publish-command" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>publish</code> command</h2>
<p>The CLI of coursier now has a <code>publish</code> command, allowing to publish
arbitrary sbt projects and directories with a Maven repository-like structure.
It's quite experimental, and should be documented in a later time.</p>
<h2><a class="anchor" aria-hidden="true" id="dynamically-load-scala-native-tools"></a><a href="#dynamically-load-scala-native-tools" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dynamically load scala-native tools</h2>
<p>The <code>--native</code> option of the <code>bootstrap</code> command can now deal with several
scala-native versions. It automatically detects the scala-native version
of the dependencies it is passed, and downloads and uses the scala-native
tools from that scala-native version</p>
<p>For example, both of these command work, and use either scala-native
<code>0.3.9</code>, or <code>0.4.0-M2</code>:</p>
<pre><code class="hljs css language-bash">$ coursier bootstrap io.get-coursier:echo_native0.3_2.11:1.0.1 \
    -o <span class="hljs-built_in">echo</span>-native-0.3 \
    --native
$ coursier bootstrap io.get-coursier:echo_native0.4.0-M2_2.11:1.0.3 \
    -o <span class="hljs-built_in">echo</span>-native-0.4.0-M2 \
    --native
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="dependency-string-completion"></a><a href="#dependency-string-completion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dependency string completion</h2>
<p>coursier now has an API and a CLI command to complete dependency strings,
like</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> (fromIndex, completions) = coursier.<span class="hljs-type">Complete</span>()
  .withInput(<span class="hljs-string">"com.chuusai::shapeless:"</span>)
  .withScalaVersion(<span class="hljs-string">"2.12.8"</span>)
  .complete()
</code></pre>
<pre><code class="hljs css language-bash">$ coursier complete --scala-version 2.12.8 com.chuusai::shapeless:
2.3.2
2.3.3
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fixes"></a><a href="#fixes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fixes</h2>
<p>Fix bug in resolution preventing <code>software.amazon.awssdk:utils:2.5.17</code>
and <code>software.amazon.awssdk:auth:2.5.17</code> to be resolved fine.</p>
<h2><a class="anchor" aria-hidden="true" id="other"></a><a href="#other" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other</h2>
<ul>
<li><code>--what-depends-on</code> now accepts patterns like <code>org:*</code> or <code>foo-*:name</code>
(thanks to <a href="https://github.com/viqueen">@viqueen</a></li>
<li>upon checksum error, both the underlying file and checksum file are deleted
from the cache, and downloaded again (no other attempt / deletion is the second
one still fails)</li>
<li>global exclusions can be passed to <code>coursier.Resolve</code> and <code>coursier.Fetch</code>
(rather than manually applied to each dependency)</li>
<li>early support for <code>latest.release</code> and <code>latest.integration</code> versions
(improved upon in later versions)</li>
<li>versions like <code>0+</code> are now handled fine</li>
<li>launchers generated by the <code>bootstrap</code> command now read the environment
variable <code>JAVA_OPTS</code> when they invoke <code>java</code></li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/07/05/1.1.0-M14">1.1.0-M14</a></h1><p class="post-meta">July 5, 2019</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/alexarchambault" target="_blank" rel="noreferrer noopener">Alexandre Archambault</a></p></div></header><article class="post-content"><div><span><p>This post describes the most notables changes of coursier <code>1.1.0-M14</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="mirrors"></a><a href="#mirrors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mirrors</h2>
<p>coursier got support for mirrors, kind of like Maven has.
Mirrors allow to substitute some repositories for others. This can be useful
with internal Maven repositories mirroring Maven Central for example. In that
case, you'd prefer requests to go to that mirror rather than to Maven
Central.</p>
<p>Mirrors are automatically picked from the API (unless explicitly disabled)
and the CLI.</p>
<p>They can be configured via configuration files, namely
<code>~/.config/coursier/mirror.properties</code> on Linux, and
<code>~/Library/Preferences/Coursier/mirror.properties</code> on OS X.
For example, these settings allow to replace Maven Central with JCenter</p>
<pre><code class="hljs">jcenter.from=<span class="hljs-string">https:</span><span class="hljs-comment">//repo1.maven.org/maven2</span>
jcenter.to=<span class="hljs-string">https:</span><span class="hljs-comment">//jcenter.bintray.com</span>
</code></pre>
<p>Mirrors should be described in more detail in the coursier documentation
in a later time.</p>
<h2><a class="anchor" aria-hidden="true" id="new-ways-of-passing-credentials"></a><a href="#new-ways-of-passing-credentials" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New ways of passing credentials</h2>
<p>The CLI and API of coursier now accepts credentials via the environment,
via Java properties, or configuration files.
These are described in more detail in the
<a href="/docs/other-credentials">dedicated documentation page</a>.
Beware that some details may change a bit before the release of <code>2.0.0</code>
final.</p>
<h2><a class="anchor" aria-hidden="true" id="refactoring"></a><a href="#refactoring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refactoring</h2>
<h3><a class="anchor" aria-hidden="true" id="redirections"></a><a href="#redirections" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Redirections</h3>
<p>HTTP redirections are now handled by some custom code, rather than by
<code>java.net.HttpURLConnection</code>. (This introduced some regressions, now fixed
in subsequent releases.) This allows a more refined handling of credentials
when redirections happen (credentials can be stripped, or added if their
settings allow it, in particular).</p>
<p>This should also allow users to more finely tune whether credentials
should be sent upfront, without waiting for a 403 Unauthorized response
(to be added to the <a href="/docs/other-credentials">dedicated documentation page</a>).</p>
<h3><a class="anchor" aria-hidden="true" id="parsers"></a><a href="#parsers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parsers</h3>
<p>Most parsers were moved in dedicated objects under the <code>coursier.parse</code>
namespace. That includes <code>DependencyParser</code>, <code>ModuleParser</code>, and
<code>RepositoryParser</code> in particular.</p>
<h3><a class="anchor" aria-hidden="true" id="high-level-api"></a><a href="#high-level-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>High level API</h3>
<p>The new high level API kept evolving / getting refined.</p>
<h2><a class="anchor" aria-hidden="true" id="fixes"></a><a href="#fixes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fixes</h2>
<h3><a class="anchor" aria-hidden="true" id="xml-errors"></a><a href="#xml-errors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>XML errors</h3>
<p>A regression in the code handling XML, since <code>1.1.0-12</code>,
giving <code>SAXParseException</code>, was fixed.</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/03/05/1.1.0-M13">1.1.0-M13</a></h1><p class="post-meta">March 5, 2019</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/alexarchambault" target="_blank" rel="noreferrer noopener">Alexandre Archambault</a></p></div></header><article class="post-content"><div><span><p>coursier <code>1.1.0-M13</code> was just released.</p>
<p>The most notable changes of this milestone happened in the new high level API,
that is nearing completion. A notion of &quot;rules&quot; or constraints is also being
added to coursier, and should be described in more detail in a later post.</p>
<h2><a class="anchor" aria-hidden="true" id="high-level-api"></a><a href="#high-level-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>High level API</h2>
<p>This API aims at being as simple to use as the CLI of coursier, while retaining
the purity of the former low level API - without all its traps.</p>
<p>For example, one can fetch a few dependencies with</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> coursier._

<span class="hljs-keyword">val</span> files = <span class="hljs-type">Fetch</span>()
  .addDependencies(
    <span class="hljs-string">dep"org.http4s:http4s-dsl_2.12:0.18.22"</span>,
    <span class="hljs-string">dep"org.tpolecat:doobie-core_2.12:0.6.0"</span>
  )
  .run()

<span class="hljs-comment">// files: Seq[java.io.File]</span>
</code></pre>
<p>It relies on a &quot;builder pattern&quot;, not unlike
<a href="https://softwaremill.com/introducing-sttp-the-scala-http-client">sttp</a>.
Numerous parameters can be adjusted by calling other methods before <code>run</code>, such
as <code>addRepositories</code>, <code>withResolutionParams</code>, <code>withCache</code>, etc.</p>
<p><code>run()</code> runs resolutions and downloads artifacts synchronously, but can be
substituted by <code>future()</code> or <code>io</code> to run things
in the background, via a <code>Future</code> or the IO monad of your choice.</p>
<p>More details can be found <a href="/docs/1.1.0-M13/api">in the documentation</a>.</p>
<p>The CLI and the sbt plugins of coursier already rely on this API. In the future,
this should ensure that more advanced features, added in the CLI or the sbt
plugin of coursier, are available to API users straightaway. It's also easier
to evolve this API while retaining binary compatibility.</p>
<h2><a class="anchor" aria-hidden="true" id="rules"></a><a href="#rules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rules</h2>
<p>Motivated by
<a href="https://github.com/scalacenter/advisoryboard/blob/master/proposals/020-sbt-transitive-dependencies-conflicts.md">SCP-20</a>,
support for enforcing some &quot;rules&quot; or constraints is being added to coursier.
These are a bit similar to those of the
<a href="https://maven.apache.org/enforcer/maven-enforcer-plugin">Maven enforcer plugin</a>,
and allow to emulate the
<a href="http://ant.apache.org/ivy/history/2.5.0-rc1/settings/conflict-managers.html">strict conflict manager of Ivy</a> in particular.</p>
<p>While details are still being ironed out, the CLI already accepts rules.</p>
<p>For example, one can require all the jackson modules to have the same version
with</p>
<pre><code class="hljs css language-bash">$ coursier resolve org.apache.spark:spark-sql_2.12:2.4.0 \
    --rules <span class="hljs-string">'SameVersion(com.fasterxml.jackson.*:jackson-*)'</span>
…
com.fasterxml.jackson.core:jackson-annotations:2.7.9:default
com.fasterxml.jackson.core:jackson-core:2.7.9:default
com.fasterxml.jackson.core:jackson-databind:2.7.9:default
com.fasterxml.jackson.module:jackson-module-paranamer:2.7.9:default
com.fasterxml.jackson.module:jackson-module-scala_2.12:2.7.9:default
…
</code></pre>
<p>By default, if a rule doesn't pass, it can try to address the underlying issue.
One can instead require resolution to fail, with</p>
<pre><code class="hljs css language-bash">$ coursier resolve org.apache.spark:spark-sql_2.12:2.4.0 \
    --rules <span class="hljs-string">'fail:SameVersion(com.fasterxml.jackson.*:jackson-*)'</span>
Resolution error: Unsatisfiable rule …
</code></pre>
<p>An upcoming post should describe rules and future plans in more detail.</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/03/04/1.1.0-M12">1.1.0-M12</a></h1><p class="post-meta">March 4, 2019</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/alexarchambault" target="_blank" rel="noreferrer noopener">Alexandre Archambault</a></p></div></header><article class="post-content"><div><span><p>Changes in <code>1.1.0-M12</code> are discussed along those of <a href="/blog/2019/03/05/1.1.0-M13"><code>1.1.0-M13</code></a>.</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/02/05/1.1.0-M11">1.1.0-M11</a></h1><p class="post-meta">February 5, 2019</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/alexarchambault" target="_blank" rel="noreferrer noopener">Alexandre Archambault</a></p></div></header><article class="post-content"><div><span><p>coursier <code>1.1.0-M11</code> was just released.
This release contains <a href="#tweaking-enhancements">numerous enhancements</a> both in
the core of coursier and its CLI, along with <a href="#fixes">a few fixes</a> for the CLI.</p>
<p>It occurs in the midst of the addition of the higher level API for coursier,
that should be discussed in a later release.
This higher level API aims at being as simple to use as the CLI of coursier.</p>
<blockquote>
<p>The <code>resolve</code>, <code>fetch</code>, and <code>launch</code> commands were heavily refactored,
to extract bits of the high level API from them. Although best efforts were made
to prevent them, these refactoring may come with some regressions. Don't
hesitate to report any if ever you run into one.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="tweaking--enhancements"></a><a href="#tweaking--enhancements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tweaking / enhancements</h2>
<h3><a class="anchor" aria-hidden="true" id="optimizations"></a><a href="#optimizations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optimizations</h3>
<p>Regular expressions were used during resolution to process Maven properties.
Some handcrafted code now handles those, which provides nice
<a href="https://github.com/coursier/coursier/pull/1026#issuecomment-456380505">performance gains</a>.</p>
<p>Maven POM parsing used to be handled by parsing the POM file itself, then
processing the resulting XML AST. It's now handled by a SAX parser, which
brought some <a href="https://github.com/coursier/coursier/pull/1029#issuecomment-456832973">performance gains</a> too.</p>
<h3><a class="anchor" aria-hidden="true" id="default-repositories"></a><a href="#default-repositories" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Default repositories</h3>
<p>In the CLI, and in the upcoming high level API, the default repositories are</p>
<ul>
<li>the local Ivy2 repository (<code>~/.ivy2/local</code>),</li>
<li><a href="https://repo1.maven.org/maven2">Maven Central</a>.</li>
</ul>
<p>These can now be tweaked via the environment, via</p>
<ul>
<li><code>COURSIER_REPOSITORIES</code> in the environment,</li>
<li>the <code>coursier.repositories</code> Java property.</li>
</ul>
<p>This environment variable or Java property are expected to contain a list
of repositories, separated by <code>|</code>, like <code>central|sonatype:releases</code>.
The repositories themselves are parsed the same way as those passed via
the <code>-r</code> or <code>--repository</code> options of the CLI.</p>
<p>Note that this does <em>not</em> affect the sbt plugin.</p>
<h3><a class="anchor" aria-hidden="true" id="cli"></a><a href="#cli" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CLI</h3>
<h4><a class="anchor" aria-hidden="true" id="download-initial-jar-from-central-rather-than-sonatype-releases"></a><a href="#download-initial-jar-from-central-rather-than-sonatype-releases" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Download initial JAR from Central rather than Sonatype releases</h4>
<p>The coursier launcher downloads <a href="https://repo1.maven.org/maven2/io/get-coursier/coursier-cli_2.12/1.1.0-M11/coursier-cli_2.12-1.1.0-M11-standalone.jar">a proguarded version</a>
of the CLI of coursier upon first launch. It is now ensured this proguarded JAR is downloaded
from <a href="https://repo1.maven.org/maven2">Maven Central</a>, rather than
<a href="https://oss.sonatype.org/content/repositories/releases">Sonatype releases</a>,
the former being usually faster than the latter.</p>
<h4><a class="anchor" aria-hidden="true" id="ship-completions-with-launcher"></a><a href="#ship-completions-with-launcher" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ship completions with launcher</h4>
<p>The completions of coursier now ship with the launcher itself. Run</p>
<pre><code class="hljs css language-bash">$ coursier --completions zsh
</code></pre>
<p>to print the Zsh ones. (Zsh is the only supported shell for now.)</p>
<h4><a class="anchor" aria-hidden="true" id="--sbt-plugin-option"></a><a href="#--sbt-plugin-option" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--sbt-plugin</code> option</h4>
<p>The <code>resolve</code> and <code>fetch</code> commands now accept a <code>--sbt-plugin</code> option to
accept sbt plugin dependencies. Use like</p>
<pre><code class="hljs css language-bash">$ coursier resolve --sbt-plugin com.typesafe.sbt:sbt-native-packager:1.3.3
</code></pre>
<p>Adjust the scala and sbt versions with the <code>--scala-version</code> and <code>sbt-version</code>
options, like</p>
<pre><code class="hljs css language-bash">$ coursier resolve \
    --sbt-plugin com.typesafe.sbt:sbt-native-packager:1.3.3 \
    --scala-version 2.10.7 \
    --sbt-version 0.13.8
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="dont-automatically-resolve-unrecognized-dependencies-against-scaladex"></a><a href="#dont-automatically-resolve-unrecognized-dependencies-against-scaladex" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Don't automatically resolve unrecognized dependencies against Scaladex</h4>
<p>Formerly, things passed to the CLI not recognized as dependencies were
assumed to be <a href="https://index.scala-lang.org">Scaladex</a> queries, like</p>
<pre><code class="hljs css language-bash">$ coursier launch ammonite
</code></pre>
<p>(Note that the Scaladex resolves this against the wrong module for now.)</p>
<p>Scaladex queries now have to be passed explicitly, like</p>
<pre><code class="hljs css language-bash">$ coursier launch --scaladex ammonite
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="conflicts-handling-from-cli-work-in-progress"></a><a href="#conflicts-handling-from-cli-work-in-progress" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conflicts handling from CLI (work in progress)</h4>
<p>The <code>resolve</code> command can now print potential conflicts among dependencies, like</p>
<pre><code class="hljs css language-bash">$ coursier resolve io.get-coursier:coursier-cli_2.12:1.1.0-M10 --conflicts
org.scala-lang:scala-library:2.12.8 was selected, but
  com.chuusai:shapeless_2.12:2.3.3                                wanted version 2.12.4
  com.github.alexarchambault:argonaut-shapeless_6.2_2.12:1.2.0-M8 wanted version 2.12.4
  com.github.alexarchambault:<span class="hljs-keyword">case</span>-app-annotations_2.12:2.0.0-M5   wanted version 2.12.7
  com.github.alexarchambault:<span class="hljs-keyword">case</span>-app-util_2.12:2.0.0-M5          wanted version 2.12.7
  com.github.alexarchambault:<span class="hljs-keyword">case</span>-app_2.12:2.0.0-M5               wanted version 2.12.7
  org.scala-lang:scala-reflect:2.12.6                             wanted version 2.12.6
  org.scala-lang.modules:scala-xml_2.12:1.1.1                     wanted version 2.12.6
  org.typelevel:cats-core_2.12:1.5.0                              wanted version 2.12.7
  org.typelevel:cats-kernel_2.12:1.5.0                            wanted version 2.12.7
  org.typelevel:cats-macros_2.12:1.5.0                            wanted version 2.12.7
  org.typelevel:machinist_2.12:0.6.6                              wanted version 2.12.6
  org.typelevel:macro-compat_2.12:1.1.1                           wanted version 2.12.0

org.scala-lang:scala-reflect:2.12.6 was selected, but
  io.argonaut:argonaut_2.12:6.2.1 wanted version 2.12.4

</code></pre>
<p>Pass <code>--fail-if-conflicts</code> to have a non-zero exit code in case of conflicts.</p>
<p>Beware that these options are a work in progress, more options to filter out
conflicts should be added in the future.</p>
<h4><a class="anchor" aria-hidden="true" id="reworked-bootstrap-launchers"></a><a href="#reworked-bootstrap-launchers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reworked bootstrap launchers</h4>
<p>The launchers generated by the <code>bootstrap</code> command underwent significant
changes, most notably the &quot;standalone&quot; launchers.</p>
<p>Standalone launchers contain the JARs they're supposed to launch as resources.
Previously, they were setting up a custom
<code>java.net.URLStreamHandlerFactory</code>, to handle custom URL protocols for
these JARs. This is no longer the case. Thanks to bits of code imported
from the <a href="https://github.com/spring-projects/spring-boot/tree/32b14f30987c4fb40d1ac69ecba47c7b876b60ce/spring-boot-project/spring-boot-tools/spring-boot-loader/src/main/java/org/springframework/boot/loader/jar">Spring boot loader</a>,
these JARs are handled via the <code>jar</code> protocol, resulting in URLs like
<code>jar:file:…!/</code>. The logic imported from Spring also has the advantage
of exposing those JARs to <code>java.net.URLClassLoader</code> in a way allowing
for a performance on par with standard files.</p>
<h2><a class="anchor" aria-hidden="true" id="fixes"></a><a href="#fixes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fixes</h2>
<h4><a class="anchor" aria-hidden="true" id="fix-stack-overflow-when-printing-trees-with-cyclic-dependencies"></a><a href="#fix-stack-overflow-when-printing-trees-with-cyclic-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fix stack overflow when printing trees with cyclic dependencies</h4>
<p>Regression since <code>1.1.0-M2</code>. For example, the following command works again</p>
<pre><code class="hljs css language-bash">$ coursier resolve -t \
    -r http://cogcomp.cs.illinois.edu/m2repo \
    edu.illinois.cs.cogcomp:illinois-nlp-pipeline:0.1.21
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="fail-loudly-on-interrupted-downloads-from-the-launcher"></a><a href="#fail-loudly-on-interrupted-downloads-from-the-launcher" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fail loudly on interrupted downloads from the launcher</h4>
<p>The coursier launcher, and the bootstraps it generates, can download some JARs
upon first launch. These downloads rely on <code>java.net.HttpURLConnection</code> for
http and https, which sometimes succeeds even if the connection is abruptly
interrupted, resulting in invalid JARs. These are now detected in the launcher,
which then requests users to try running the launcher again.</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2019/01/14/1.1.0-M10">1.1.0-M10</a></h1><p class="post-meta">January 14, 2019</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/alexarchambault" target="_blank" rel="noreferrer noopener">Alexandre Archambault</a></p></div></header><article class="post-content"><div><span><p>coursier <code>1.1.0-M10</code> was just released.
This is the first release of coursier while it's
<a href="https://get-coursier.io">new website</a> is up and running, and
<a href="https://github.com/olafurpg/sbt-ci-release">sbt-ci-release</a> handles
publishing, from Travis CI.</p>
<p>Note that this is a milestone release, not necessarily aiming at retaining
binary / source compatibility of the API with earlier versions. If you're using
coursier via its API, it is recommended to stay on former versions unless
you're interested in the very latest features and are ready to update the way
you use the API in later versions.</p>
<h2><a class="anchor" aria-hidden="true" id="new-launcher-url"></a><a href="#new-launcher-url" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New launcher URL</h2>
<p>One notable change of this release is that the launchers of coursier are now
being pushed
to <a href="https://github.com/coursier/coursier/releases">GitHub release pages</a>
rather than in the <code>master</code> branch of the coursier git repository. The URL to
download it thus changes.</p>
<p>Download the latest launcher at either</p>
<ul>
<li><a href="https://git.io/coursier-cli"><code>https://git.io/coursier-cli</code></a></li>
<li><a href="https://github.com/coursier/coursier/raw/gh-pages/coursier"><code>https://github.com/coursier/coursier/raw/gh-pages/coursier</code></a></li>
<li><a href="https://get-coursier.io/coursier"><code>https://get-coursier.io/coursier</code></a></li>
</ul>
<p>Download a specific version via the release assets, e.g.</p>
<ul>
<li><a href="https://github.com/coursier/coursier/releases/download/v1.1.0-M9/coursier"><code>https://github.com/coursier/coursier/releases/download/v1.1.0-M9/coursier</code></a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="also"></a><a href="#also" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Also</h2>
<h3><a class="anchor" aria-hidden="true" id="--what-depends-on-option"></a><a href="#--what-depends-on-option" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--what-depends-on</code> option</h3>
<p>Add a <code>--what-depends-on</code> option to the <code>resolve</code> command, to quickly
know which dependencies bring a particular dependency (<a href="https://github.com/coursier/coursier/pull/997">#997</a>), e.g.</p>
<pre><code class="hljs css language-bash">$ coursier resolve \
    --what-depends-on org.htrace:htrace-core \
    org.apache.spark:spark-sql_2.12:2.4.0
  Result:
└─ org.htrace:htrace-core:3.0.4
   ├─ org.apache.hadoop:hadoop-common:2.6.5
   │  └─ org.apache.hadoop:hadoop-client:2.6.5
   │     └─ org.apache.spark:spark-core_2.12:2.4.0
   │        ├─ org.apache.spark:spark-catalyst_2.12:2.4.0
   │        │  └─ org.apache.spark:spark-sql_2.12:2.4.0
   │        └─ org.apache.spark:spark-sql_2.12:2.4.0
   └─ org.apache.hadoop:hadoop-hdfs:2.6.5
      └─ org.apache.hadoop:hadoop-client:2.6.5
         └─ org.apache.spark:spark-core_2.12:2.4.0
            ├─ org.apache.spark:spark-catalyst_2.12:2.4.0
            │  └─ org.apache.spark:spark-sql_2.12:2.4.0
            └─ org.apache.spark:spark-sql_2.12:2.4.0
</code></pre>
<p>(Adapted from the <code>coursierWhatDependsOn</code> command of sbt-coursier, itself
inspired by the <code>whatDependsOn</code> command of <a href="https://github.com/jrudolph/sbt-dependency-graph">sbt-dependency-graph</a>.)</p>
<h3><a class="anchor" aria-hidden="true" id="coursier-bootstrap-library"></a><a href="#coursier-bootstrap-library" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>coursier-bootstrap</code> library</h3>
<p>Move the bootstrap generation logic of the <code>bootstrap</code> command to a separate
standalone library (<code>io.get-coursier::coursier-bootstrap:1.1.0-M10</code>, <a href="https://github.com/coursier/coursier/pull/991">#991</a>).</p>
<h3><a class="anchor" aria-hidden="true" id="leaking-of-classes-from-the-bootstraps"></a><a href="#leaking-of-classes-from-the-bootstraps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Leaking of classes from the bootstraps</h3>
<p>Prevent classes from the coursier launcher or of the logic of coursier
bootstrap to leak in apps launched via the <code>fetch</code> command or bootstrap
generated via the <code>bootstrap</code> command (<a href="https://github.com/coursier/coursier/pull/983">#983</a> - <code>coursier.CachePath</code> or
the classes of <a href="https://github.com/soc/directories-jvm">directories</a> could
leak in the launched application classpath.)</p>
<h3><a class="anchor" aria-hidden="true" id="ldflags-for-scala-native-executable-generation"></a><a href="#ldflags-for-scala-native-executable-generation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>LDFLAGS</code> for scala-native executable generation</h3>
<p>Accept linking flags via <code>LDFLAGS</code> in the environment, when
<a href="../docs/cli-native-bootstrap">generating scala-native executables</a> (<a href="https://github.com/coursier/coursier/pull/981">#981</a>).</p>
<h3><a class="anchor" aria-hidden="true" id="other"></a><a href="#other" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other</h3>
<ul>
<li>force fetching artifacts from the CLI with <code>--force-fetch</code>, even if
resolution failed (<a href="https://github.com/coursier/coursier/pull/980">#980</a>)</li>
<li>fix JARs landing in the wrong classloader, when using the classloader
isolation capabilities of the <code>bootstrap</code> command (<a href="https://github.com/coursier/coursier/pull/982">#982</a>)</li>
<li>refactoring of the cache module (<a href="https://github.com/coursier/coursier/pull/984">#984</a>)</li>
<li>switch to scala <code>2.12.8</code> (<a href="https://github.com/coursier/coursier/pull/986">#986</a>), add support for scala <code>2.13.0-M5</code></li>
<li>switch to fastparse 2 (<a href="https://github.com/coursier/coursier/pull/990">#990</a>, still shaded so that it doesn't appear as a
dependency to downstream users of coursier)</li>
<li>allow to adjust the default number of parallel downloads via the
<code>coursier.parallel-download-count</code> Java property (<a href="https://github.com/coursier/coursier/pull/994">#994</a>)</li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><h2><a href="/" class="nav-home">Coursier</a></h2><div><h5><a href="/docs/overview">Docs</a></h5><a href="/docs/overview">Overview</a><a href="/docs/cli-installation">Install CLI</a><a href="/docs/sbt-coursier">Setup sbt</a><a href="/docs/api">Use the API</a></div><div><h5><a href="https://gitter.im/coursier/coursier" target="_blank">Community</a></h5><a href="https://gitter.im/coursier/coursier" target="_blank"><img src="https://img.shields.io/gitter/room/coursier/coursier.svg?logo=gitter&amp;style=social"/></a><a href="https://github.com/coursier/coursier" target="_blank"><img src="https://img.shields.io/github/stars/coursier/coursier.svg?color=%23087e8b&amp;label=stars&amp;logo=github&amp;style=social"/></a></div></section><section class="copyright">Copyright © 2024 coursier contributors</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '53a7a919d6905f94dafd59e25d0f5e5d',
                indexName: 'get-coursier',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>